#!/usr/bin/env bash
# 
# Global-profile file. This is a completely customised settings file that only
# has custom, system independent, settings in it. First symlink it from home:
#   $ ln -s /path/to/dotfiles/.lbashrc
#
# Then import it from the local .bashrc/.bash_profile/.profile with the
# following:
#
#   [[ -s ~/.gprofile ]] && source ~/.gprofile
#
# font: https://github.com/andreberg/Meslo-Font/



# To set the correct collor scheme in tmux
export EDITOR=vim
export PATH=$HOME/bin:$PATH
export TERM=screen-256color-bce


# Local settings
#----------------------------------------
if [ -s ~/.lprofile ]; then
    source ~/.lprofile
else
    echo "No local settings file '.lprofile' found."
fi


export HISTTIMEFORMAT='%F %T '


# Note: Homebrew stuff needs to go first, otherwise the programs are not in the PATH

# Homebrew
#----------------------------------------
if [ -x /usr/local/bin/brew ]; then
    export BREW_HOME="/usr/local/"
    export PATH="/usr/local/bin:$PATH"  #Put brew/bin in front of standard bin in PATH
fi

# Linuxbrew
#----------------------------------------
if [ -x $HOME/.linuxbrew/bin/brew ]; then
    export BREW_HOME="$HOME/.linuxbrew"

	export PATH="$BREW_HOME/bin:$BREW_HOME/sbin:$PATH"
	export MANPATH="$BREW_HOME/share/man:$MANPATH"
	export INFOPATH="$BREW_HOME/share/info:$INFOPATH"

    export PKG_CONFIG_PATH=$BREW_HOME/lib/pkgconfig:$BREW_HOME/share/pkgconfig:$BREW_HOME/Library/ENV/pkgconfig/0
    export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig:/usr/lib/pkgconfig   
    export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/lib/x86_64-linux-gnu/pkgconfig:/usr/share/pkgconfig
fi

# Go
#----------------------------------------
if hash go 2>/dev/null; then
	export GOPATH=$HOME/repos/go
	export PATH=$PATH:$GOPATH/bin
fi

# P4
#----------------------------------------
if hash p4 2>/dev/null; then
    if [ -s ~/.p4profile ]; then
        source ~/.p4profile
    else
        echo "p4 settings file not found"
    fi
fi

# Gradle
#----------------------------------------
# if hash gradle 2>/dev/null; then
#     export GRADLE_HOME=$BREW_HOME/Cellar/gradle/
# fi

# Par
#----------------------------------------
if hash par 2>/dev/null; then
    export PARINIT='rTbgqR B=.,?_A_a P=_s Q=>|}'
fi

# Special Functionality
#======================================================================


SCRIPT_PATH="${BASH_SOURCE[0]}";
while([ -h "${SCRIPT_PATH}" ]) do 
    SCRIPT_PATH="$(readlink "`basename "${SCRIPT_PATH}"`")"; 
done
SCRIPT_DIR=$(dirname $SCRIPT_PATH)


# load aditional scripts

source $SCRIPT_DIR/ps1style.sh

